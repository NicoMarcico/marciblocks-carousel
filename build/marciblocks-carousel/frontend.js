document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-marciblocks-carousel").forEach((e=>{const t=e.querySelectorAll(".marciblocks-carousel-items__item"),c=e.querySelectorAll(".marciblocks-carousel-tabs__tab"),r=e.querySelectorAll(".marciblocks-carousel-descs__desc"),l=e.querySelector(".marciblocks-carousel-controls__control--prev"),s=e.querySelector(".marciblocks-carousel-controls__control--next");if(!t.length||!c.length)return void console.warn("Incomplet Carousel");let o=0;const a=e=>{const l=t[o],s=t[e],a=s.querySelector("img"),n=c[o],i=c[e],d=r?.length?r[o]:null,u=r?.length?r[e]:null;function v(){l.classList.remove("active"),s.classList.add("active")}function b(){d&&u&&(d.classList.remove("active"),d.setAttribute("aria-hidden",!0),u.classList.add("active"),u.setAttribute("aria-hidden",!1))}a.src&&a.src!==window.location.href?(v(),r?.length&&b()):(a.src=a.dataset.src,a.addEventListener("error",(()=>{console.error("Image not found:",a.dataset.src)}),{once:!0}),a.addEventListener("load",(()=>{v(),r?.length&&b()}),{once:!0})),n.setAttribute("tabindex","-1"),n.setAttribute("aria-selected",!1),n.classList.remove("active"),i.removeAttribute("tabindex"),i.setAttribute("aria-selected",!0),i.classList.add("active"),o=e};c.forEach(((e,t)=>{e.addEventListener("click",(()=>a(t)))})),l.addEventListener("click",(()=>{a((o-1+c.length)%c.length)})),s.addEventListener("click",(()=>{a((o+1)%c.length)})),a(o)}))}));